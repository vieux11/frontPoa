<!-- En haut du template (register.component.html) -->
@if (showSuccessToast) {
  <div class="fixed top-4 right-4 z-50 animate-fade-in">
    <div class="bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg flex items-center">
      <span>üéâ Compte cr√©√© avec succ√®s !</span>
      <button 
        (click)="showSuccessToast = false" 
        class="ml-4 text-xl hover:text-green-200"
      >
        &times;
      </button>
    </div>
  </div>
}

<div class="max-w-md mx-auto mt-10 p-6 bg-white shadow rounded">
  <h2 class="text-2xl font-bold mb-4 text-center">Cr√©er un compte</h2>

  <!-- Erreur API -->
  @if (submitted && apiError) {
    <div class="mb-4 p-3 bg-red-100 text-red-800 rounded flex justify-between items-center">
      <strong>{{ apiError }}</strong>
      <button (click)="close()" class="text-xl font-bold px-2">&times;</button>
    </div>
  }

  <form [formGroup]="registerForm" (ngSubmit)="handleSubmit()">
    <!-- Nom -->
    <div class="mb-4">
      <label for="nom" class="block text-gray-700">Nom *</label>
      <input 
        type="text" 
        id="nom" 
        formControlName="nom" 
        class="w-full border p-2 rounded mt-1"
        [class.border-red-500]="registerForm.get('nom')?.invalid && registerForm.get('nom')?.touched"
      >
      @if (registerForm.get('nom')?.invalid && registerForm.get('nom')?.touched) {
        <div class="text-red-500 text-sm mt-1">
          @if (registerForm.get('nom')?.errors?.['required']) {
            <p>Le nom est obligatoire.</p>
          }
          @if (registerForm.get('nom')?.errors?.['minlength']) {
            <p>2 caract√®res minimum.</p>
          }
          @if (registerForm.get('nom')?.errors?.['whitespace']) {
            <p>Ne peut pas √™tre vide.</p>
          }
        </div>
      }
    </div>

    <!-- Email -->
    <div class="mb-4">
      <label for="email" class="block text-gray-700">Email *</label>
      <input 
        type="email" 
        id="email" 
        formControlName="email" 
        class="w-full border p-2 rounded mt-1"
        [class.border-red-500]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
      >
      @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
        <div class="text-red-500 text-sm mt-1">
          @if (registerForm.get('email')?.errors?.['required']) {
            <p>L'email est obligatoire.</p>
          }
          @if (registerForm.get('email')?.errors?.['email']) {
            <p>Format d'email invalide.</p>
          }
        </div>
      }
    </div>

    <!-- Exemple pour le champ Password -->
<div class="mb-4">
  <label for="password" class="block text-gray-700">Mot de passe *</label>
  <input 
    type="password" 
    id="password" 
    formControlName="password" 
    class="w-full border p-2 rounded mt-1"
    [class.border-red-500]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
  >
  @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
    <div class="text-red-500 text-sm mt-1">
      @if (registerForm.get('password')?.errors?.['required']) {
        <p>Le mot de passe est obligatoire.</p>
      }
      @if (registerForm.get('password')?.errors?.['minlength']) {
        <p>8 caract√®res minimum.</p>
      }
    </div>
  }
</div>

    <!-- R√¥le -->
    <div class="mb-4">
      <label class="block text-gray-700 mb-1">R√¥le *</label>
      <div class="flex space-x-4">
        <label class="inline-flex items-center">
          <input 
            type="radio" 
            formControlName="role" 
            value="client" 
            class="form-radio text-primary border-[#A03473]"
          >
          <span class="ml-2">Client</span>
        </label>
        <label class="inline-flex items-center">
          <input 
            type="radio" 
            formControlName="role" 
            value="admin" 
            class="form-radio text-primary border-[#A03473]"
          >
          <span class="ml-2">Admin</span>
        </label>
      </div>
      @if (registerForm.get('role')?.invalid && registerForm.get('role')?.touched) {
        <div class="text-red-500 text-sm mt-1">
          <p>Veuillez s√©lectionner un r√¥le.</p>
        </div>
      }
    </div>

    <button 
      type="submit" 
      class="w-full bg-[#A03473] text-white py-2 rounded hover:bg-[#88175a] transition cursor-pointer"
      [disabled]="registerForm.invalid"
    >
      Cr√©er un compte
    </button>
  </form>

  <p class="text-center text-sm mt-4">
    Vous avez d√©j√† un compte ?
    <a [routerLink]="['/login']" class="text-[#A03473] hover:underline">Connectez-vous</a>
  </p>
</div>